<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hashable :: Python objet</title>
    <meta name="generator" content="Antora 3.1.12">
    <link rel="stylesheet" href="../../../_/css/site.css">
<!-- reference des feuilles de styles supplémentaires -->
<link rel="stylesheet" href="../../../_/css/layout.css">
<link rel="stylesheet" href="../../../_/css/content.css">

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">Python objet</a>
  <!-- suppression du burger du bandeau
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
-->      
    </div>
<!-- suppression des boutons du bandeau
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="python_objet" data-version="2025">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Python objet</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../poo/poo.html">Concepts de la POO</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../objet/objet.html">Objet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../operateurs/operateurs.html">Opérateurs</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../classe/classe.html">Membres de classe</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../heritage/heritage.html">Héritage</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../exception/exception.html">Exceptions</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_iter/iter.html">Itérable</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_files/files.html">Lecture/écriture de données</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_contextman/context.html">Context manager</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_serialisation/serialisation.html">Sérialisation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../app_callable/callable.html">Callables</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Python objet</span>
    <span class="version">2025</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Python objet</span>
      <ul class="versions">
        <li class="version is-current">
          <a href="../index.html">2025</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Python objet</a></li>
    <li><a href="hashable.html">Hashable</a></li>
  </ul>
</nav>
<!-- supression de "edit this page"
  <div class="edit-this-page"><a href="file:///home/jaclin/antora_components/python_objet/./modules/internals/pages/hashable.adoc">Edit this Page</a></div>
-->
</div>
  <!-- ajout de la date de modification -->
  <div class="lastmodify"> modifié le <span id="lastmodify"/> </div>
  <!-- fin ajout -->
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Hashable</h1>
<div class="sect1">
<h2 id="_lénigme"><a class="anchor" href="#_lénigme"></a>1. L&#8217;énigme</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Le but est de comprendre pourquoi la classe `Cartes `ci-dessous ne fonctionne pas :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">class Carte():
  figures = ['Valet','Dame','Roi']
  honneurs = figures + ['As']
  valeurs = list(range(7,11)) + honneurs
  couleurs = ['Coeur','Carreau','Pique','Trèfle']

  def __init__(self,v=None,c=None):
    if not v:
      v = Carte.valeurs[randrange(0,len(Carte.valeurs))]
    if not c:
      c = Carte.couleurs[randrange(0,len(Carte.couleurs))]

    if not v in Carte.valeurs: raise ValueError(f"{v}: valeur incorrecte")
    if not c in Carte.couleurs: raise ValueError(f"{c}: couleur incorrecte")
    self.couleur = c
    self.valeur = v

  def __str__(self):
    return f"{self.valeur} de {self.couleur}"

class Cartes():
  def __init__(self,c=None):
    if c:
      self.cartes = c.cartes[:]
    else:
      self.cartes = []

  def __isub__(self,carte):
    self.cartes.remove(carte)

    return self

  def __str__(self):
    s = []
    for c in list(self.cartes):
      s += [ str(c) ]

    return ", ".join(s)

  def __repr__(self):
    return self.__str__()

  def ajoute(self,c):
    self.cartes += [c]</code></pre>
</div>
</div>
<div class="paragraph">
<p>En effet, le programme ci-dessous :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">if __name__=="__main__":
  des_cartes = Cartes()

  des_cartes.ajoute(Carte("As","Coeur"))
  des_cartes.ajoute(Carte(10,"Carreau"))
  des_cartes.ajoute(Carte(7,"Trèfle"))

  print(f"{des_cartes=}")
  des_cartes -= Carte(10,"Carreau")  # ValueError: list.remove(x): x not in list
  print(f"{des_cartes=}")</code></pre>
</div>
</div>
<div class="paragraph">
<p>sort l&#8217;erreur : <code>list.remove(x): x not in list</code>.
Impossible donc de retirer le 10 de Carreau du paquet de cartes.</p>
</div>
<div class="paragraph">
<p>Pour comprendre ce qu&#8217;il se passe,
il faut comprendre ce qu&#8217;est un hashable et quel est son rôle dans le système de types de Python.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tableau_associatif"><a class="anchor" href="#_tableau_associatif"></a>2. Tableau associatif</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un tableau associatif, ou <em>table de hashage</em>,
est une structure de données de haut niveau,
n&#8217;existant pas forcément dans tous les langages de programmation, notamment les plus anciens (comme C).
Elle est appelée
<em>dictionnaire</em> en Python,
<em>hash</em> en Perl,
<em>map</em> en C++,
<em>objet</em> en JavaScript,
<em>HashMap</em> en Java.</p>
</div>
<div class="paragraph">
<p>Un tableau associatif est un conteneur de paires <code>(clé,valeur)</code>.
Une valeur peut être recupérée directement à partir de la clé associée,
sans itérer : par un accès direct (<em>random access</em>).
C&#8217;est son grand atout.</p>
</div>
<div class="sect2">
<h3 id="_complexité_algorithmique"><a class="anchor" href="#_complexité_algorithmique"></a>2.1. Complexité algorithmique</h3>
<div class="paragraph">
<p>La complexité temporelle d’un algorithme est le nombre d’opérations qu&#8217;il est nécessaire d&#8217;exécuter pour résoudre le problème.
Ce nombre dépend généralement des données du problème (les paramètres de l’algorithme).
Ce qui est surtout intéressant, c&#8217;est de connaitre la variation de cette complexité en fonction de la taille n des données (pour n grand, de façon à ce que cela soit représentatif) :</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/complexite.png" alt="complexite">
</div>
</div>
<div class="paragraph">
<p>Un algorithme qui effectue 2 fois plus d&#8217;opérations lorsqu&#8217;on double la taille des données,
3 fois plus quand on les triple, etc.
 est de complexité linéaire, notée O(n), où n représente la taillle des données.
Un algorithme qui effectue 4 fois plus d&#8217;opérations lorsqu&#8217;on double la taille des données,
9 fois plus quand on les triple, etc.
est de complexité O(n²).</p>
</div>
<div class="paragraph">
<p>Cette complexité temporelle donne un ordre de grandeur de la variation du temps de calcul en fonction de la taille des données.
De la même façon, la complexité spaciale d&#8217;un algorithme évalue la mémoire nécessaire à la résolution du problème.
Ces 2 notions permettent  de comparer l&#8217;efficacité de 2 algorithmes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_recherche_séquentielle_et_dichotomique"><a class="anchor" href="#_recherche_séquentielle_et_dichotomique"></a>2.2. Recherche séquentielle et dichotomique</h3>
<div class="paragraph">
<p>La recherche séquentielle (<em>linear search</em>) d&#8217;un élément dans une liste consiste
à parcourir séquentiellement les éléments de la liste dans l&#8217;ordre naturel,
de comparer la valeur de l&#8217;élément courant à l&#8217;élément recherché, et de s&#8217;arrêter soit parce que l&#8217;élément courant est égal à l&#8217;élément recherché (la recherche a trouvé),
soit parce que la liste a été entièrement parcourue (la recherche n&#8217;a pas trouvée).
La complexité en temps de la recherche séquentielle est O(n).</p>
</div>
<div class="paragraph">
<p>La recherche dichotomique (<em>binary search</em>) s&#8217;applique à une liste triée (par exemple en ordre croissant)
d&#8217;éléments en unique exemplaire.
Elle consiste alors à tester la valeur centrale de la liste à la valeur recherchée.
Si cette dernière est inférieure à la valeur centrale, alors cela signifie qu&#8217;elle se trouve dans la première moitié, sinon elle se trouve dans la seconde.
On réitère alors le processus dans la moitié en question, jusqu&#8217;à ou bien trouver la valeur recherchée, ou bien avoir un intervalle nul.
La complexité en temps de la recherche dichotomique est O(log<sub>2</sub>(n))
(donc bien plus rapide que la recherche séquentielle).</p>
</div>
<div class="paragraph">
<p>Cet algorithme suppose que
1/ on sache calculer la position des éléments, et que
2/ on puisse accéder directement à cette position.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Quand on cherche un mot dans un dictionnaire papier,
on procède tous instinctivement (même les non-informaticiens 😉 ) par dichotomie.
Mais si le petit Larousse était écrit sur un ruban, alors on devrait se contenter de recherches sequentielles&#8230;&#8203; et on passerait notre temps à chercher, chercher, chercher&#8230;&#8203;
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_index"><a class="anchor" href="#_index"></a>2.3. Index</h3>
<div class="paragraph">
<p>Soit la liste :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. table données</caption>
<colgroup>
<col style="width: 12%;">
<col style="width: 24%;">
<col style="width: 24%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indice</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prénom</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zacharie</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gerault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thomas</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teruel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benjamin</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gouerec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ann-Gaelle</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rabarijaona</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vahia</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lebreton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flavien</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dussot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sarah</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bouhi</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ibrahim</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Douarec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chloe</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lesage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solene</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diallo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alpha Issagha</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tasli</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ilyas</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>On veut pouvoir effectuer des recherches rapides sur les noms et prénoms.
Mais la liste n&#8217;est pas triée.
Et même si elle l&#8217;était, elle le serait soit dans l&#8217;ordre des noms, soit dans l&#8217;ordre des prénoms,
mais pas les 2.
Pour effectuer des recherches dichotomiques sur les noms ou les prénoms, on crée donc 2 index :</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. index nom</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indice dans table</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Diallo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Douarec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dussot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duval</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gerault</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gouerec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lebreton</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lesage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rabarijaona</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tasli</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teruel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>et</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. index prénom</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 40%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prénom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indice dans table</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Alpha Issagha</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ann-Gaelle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Benjamin</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chloe</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flavien</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ibrahim</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ilyas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sarah</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Solene</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Thomas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Vahia</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zacharie</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Dans chacun des index, on s&#8217;arrange pour que toutes les paires aient la même taille,
afin de pouvoir calculer la position d&#8217;un élément donné.
Pour la recherche d&#8217;un individu à partir de son nom, on cherche dichotomiquement dans l&#8217;index nom,
puis on remonte via l&#8217;indice dans la table des données.
Et même chose pour un prénom.</p>
</div>
</div>
<div class="sect2">
<h3 id="_id"><a class="anchor" href="#_id"></a>2.4. id</h3>
<div class="paragraph">
<p>En Python, chaque donnée possède une identité
(un entier), consultable avec <code>id()</code>, indépendant de la valeur de la donnée.
2 variables <code>a</code> et <code>b</code> référençant 2 données ayant le même id sont en réalité 2 références vers la même donnée.
Dans ce cas <code>a is b</code> est vrai.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<code>a is b</code> signifie <code>id(a)==id(b)</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Un <code>id</code> n&#8217;a de consistance que pendant la session d&#8217;exécution courante :
un objet ne conserve pas son <code>id</code> d&#8217;une exécution à l&#8217;autre.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hash"><a class="anchor" href="#_hash"></a>2.5. Hash</h3>
<div class="paragraph">
<p>Le hash d&#8217;une donnée est une empreinte caractéristique (<em>digest</em>) de cette donnée, un résumé.
Une <em>collision</em> correspond au cas (exceptionnel) où 2 données disctintes possèdent le même hash,
ce que l&#8217;on cherche à éviter.</p>
</div>
<div class="paragraph">
<p>Une fonction de hashage est l&#8217;algorithme qui calcule le hash sur un ensemble de données.
Une bonne fonction de hashage doit essayer de distribuer uniformément les hashs qu&#8217;elle calcule,
de façon à minimiser les collisions.
Il est alors improbable que 2 données distinctes produisent le même hash (improbable mais pas impossible).
<code>MD</code>, <code>SHA</code>, <code>RIPEMD</code>  sont des exemples de fonctions de hashage.
Les commandes Unix <code>md5sum</code>, <code>sha1sum</code>, <code>sha512sum</code> en donnent une implémentation.</p>
</div>
<div class="paragraph">
<p>Le hash est utilisé, dans certaines situations, pour représenter la donnée à partir de laquelle il a été calculé, afin par exemple de simplifier ou d&#8217;accélérer les traitements.
Exemple : détecter les modifications du contenu d&#8217;un fichier au cours du temps.</p>
</div>
<div class="paragraph">
<p>En Python, une donnée possédant un hash s&#8217;appelle un <em>hashable</em>.
On obtient le hash d&#8217;une donnée via la fonction <code>hash()</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_implémentation_dun_dictionnaire"><a class="anchor" href="#_implémentation_dun_dictionnaire"></a>2.6. Implémentation d&#8217;un dictionnaire</h3>
<div class="paragraph">
<p>L&#8217;intérêt d&#8217;un dictionnaire est de pouvoir récupérer un élément à l&#8217;aide de sa clé, directement, sans besoin d&#8217;itérer.</p>
</div>
<div class="paragraph">
<p>Grosso modo, on peut voir un dictionnaire comme une liste de paire <code>(clé,valeur)</code>
et d&#8217;un index <code>(hash(clé),indice_dans_liste)</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Seuls les données hashables peuvent être clé dans un dictionnaire.
De même, et pour les mêmes raisons,
seule une donnée hashable peut être élément d&#8217;un ensemble
(type <code>set</code> et <code>frozenset</code>).
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_objets"><a class="anchor" href="#_objets"></a>3. Objets</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_eq"><a class="anchor" href="#_eq"></a>3.1. <code>__eq__()</code></h3>
<div class="paragraph">
<p>La méthode <code>__eq__()</code> donne un sens à l&#8217;expression <code>x==y</code>.
Si la classe ne surcharge pas cette méthode,
alors le comportement par défaut est <code>x==y &#8656;&#8658; x is y</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_hash_2"><a class="anchor" href="#_hash_2"></a>3.2. <code>__hash__()</code></h3>
<div class="paragraph">
<p>Les instances de classes sont hashables, mais le programmeur peut personnaliser la valeur du hash en surchargeant la méthode <code>__hash__()</code>.
Pour cela, une contrainte impérative à respecter est :
<code>x==y  &#8658; hash(x)==hash(y)</code>.
Exemple de mauvaise mais néanmoins valide méthode <code>__hash__()</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">class Point:
  def __init__(self,x,y):
    self.x = x
    self.y = y

  def __hash__(self):
    return 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Avec cette méthode <code>__hash__()</code>, toutes les instances de <code>Point</code> vont collisionner.
Autre exemple, de meilleure qualité :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">class Point:
  def __init__(self,x,y):
    self.x = x
    self.y = y

  def __hash__(self):
    return hash( (self.x, self.y) )</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p class="center">
  <span style="font-size: 0.9em;">
    <a href="https://jacquelincharbonnel.github.io/">Jacquelin Charbonnel</a>
    <!-- &nbsp; &mdash; &nbsp; -->
    &nbsp; &nbsp;
    &copy;Creative Commons BY-NC-SA 4.0
  </span>
  </p>
</footer>

<script>
var myDate = new Date(document.lastModified);
myNewDate = new Intl.DateTimeFormat(
            undefined,
            {year: "numeric", month: "long", day: "numeric", hour: "2-digit", minute: "2-digit"}
        )
        .format(myDate).replace(/\./g, '-');
document.getElementById("lastmodify").innerHTML = myNewDate ;
</script>

<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
